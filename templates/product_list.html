{% extends 'master.html' %}
{% load static %}


{% block title %}
    <title>Product List</title>
{% endblock %}
{% block extra_css %}

    <link href="{% static 'assets/vendor/simple-datatables/style.css' %}" rel="stylesheet">

{% endblock %}




{% block content %}
    <div class="row">
        <div class="col-lg-12">

            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Products</h5>
                    <p>Products In Store</p>

                    <!-- Table with stripped rows -->
                    <table class="table datatable">
                        <thead>
                        <tr>

                            <th>Product Name</th>
                            <th>Category</th>
                            <th>Stock Quantity</th>
                            <th data-type="date" data-format="YYYY/DD/MM">Manufacture Date</th>
                            <th data-type="date" data-format="YYYY/DD/MM">Expiry Date</th>
                            <th>Status</th>
                            <th>Price</th>
                            <th>SKU</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tfoot>
                        <tr>

                            <th>Product Name</th>
                            <th>Category</th>
                            <th>Stock Quantity</th>
                            <th data-type="date" data-format="YYYY/DD/MM">Manufacture Date</th>
                            <th data-type="date" data-format="YYYY/DD/MM">Expiry Date</th>
                            <th>Status</th>
                            <th>Price</th>
                            <th>SKU</th>
                            <th>Actions</th>
                        </tr>
                        </tfoot>
                        <tbody>
                        {% for product in products %}
                            <tr>
                                <td>{{ product.name }}</td>
                                <td>{{ product.category }}</td>
                                <td>
                                    {{ product.quantity }}
                                </td>
                                <td>{{ product.manufacture_date | date:"d-m-y" }}</td>
                                <td>{{ product.expiry_date | date:"d-m-y" }}</td>
                                <td>
                                    {% if product.status == "In Stock" %}
                                        <span class="badge bg-success">{{ product.status }}</span>
                                    {% elif product.status == "Out of Stock" %}
                                        <span class="badge bg-danger">{{ product.status }}</span>
                                    {% elif product.status == "Expired" %}
                                        <span class="badge bg-warning">{{ product.status }}</span>
                                    {% endif %}
                                </td>
                                <td>{{ product.price }}</td>
                                <td>{{ product.sku }}</td>
                                <td>
                                    <!-- Action buttons -->
                                    <a href="{% url 'view_details' product.id %}" class="btn btn-info btn-sm">View
                                        Details</a>

                                    <a href="{% url 'edit_product' product.id %}"
                                       class="btn btn-warning btn-sm">Edit</a>

                                    <a href="{% url 'add_stock' product.id %}" class="btn btn-success btn-sm">Add
                                        Stock</a>
                                    <form action="{% url 'delete_product' product.id %}" method="post"
                                          style="display:inline;">
                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-danger btn-sm"
                                                onclick="return confirm('Are you sure you want to delete this product?')">
                                            Delete
                                        </button>
                                    </form>
                                </td>
                            </tr>
                        {% endfor %}

                        </tbody>
                    </table>
                    <!-- End Table with stripped rows -->

                </div>
            </div>

        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'assets/vendor/simple-datatables/simple-datatables.js' %}"></script>
{% endblock %}